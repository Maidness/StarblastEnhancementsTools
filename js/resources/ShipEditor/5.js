Compiler.getProperVariableName=function(str,mode){var invalidChar=["=","-","+",'"',"'","`","(",")","{","}","[","]","{","}","<",">",".",",",";",":","~","!","?","@","#","%","^","&","*","|","\\","/"],reservedWords=["break","case","catch","continue","debugger","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","class","const","enum","export","extends","import","super","null","true","false"],reservedStrictWords=["implements","interface","let","package","private","protected","public","static","yield"],input=(str=="")?("unknown"):(str.replace(/(\')/g,"\\'"));for(let e of reservedWords)if(input==e){input="_"+input;break}if("strict"==(mode||""))for(let e of reservedStrictWords)if(input==e){input="_"+input;break}var sample="var validChars = '"+input+"'.replace(/(\\s";for(let e of invalidChar)sample+="|\\"+e;return sample+=")/g,'_');",eval(sample),validChars.replace(/^(\d)/g,"_$1")};
Compiler.getModCode = function(src){var code=CoffeeScript.compile(src),shipdata=eval(code);shipdata.typespec=Compiler.compileShip(shipdata);var name=Compiler.getProperVariableName(shipdata.name||"unknown"+"_"+shipdata.typespec.code,"strict");return"var "+name+" = '"+JSON.stringify(shipdata).replace(/(\')/g,"\\'")+"';"};
ShipEditor.prototype.modExport = function(){var code,name,shipdata,src;return src=this.editor.getValue(),code=CoffeeScript.compile(src),shipdata=eval(code),null!=shipdata&&(Compiler.getModCode(src))};
